{"version":3,"file":"bs-stepper.js","sources":["../../src/js/polyfill.js","../../src/js/util.js","../../src/js/listeners.js","../../src/js/index.js"],"sourcesContent":["let matches = window.Element.prototype.matches\nlet closest = (element, selector) => element.closest(selector)\nlet WinEvent = (inType, params) => new window.Event(inType, params)\n\n/* istanbul ignore next */\nfunction polyfill () {\n  if (!window.Element.prototype.matches) {\n    matches = window.Element.prototype.msMatchesSelector ||\n      window.Element.prototype.webkitMatchesSelector\n  }\n\n  if (!window.Element.prototype.closest) {\n    closest = (element, selector) => {\n      if (!document.documentElement.contains(element)) {\n        return null\n      }\n\n      do {\n        if (matches.call(element, selector)) {\n          return element\n        }\n\n        element = element.parentElement || element.parentNode\n      } while (element !== null && element.nodeType === 1)\n\n      return null\n    }\n  }\n\n  if (!window.Event || typeof window.Event !== 'function') {\n    WinEvent = (inType, params) => {\n      params = params || {}\n      const e = document.createEvent('Event')\n      e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable))\n      return e\n    }\n  }\n}\n\npolyfill()\n\nexport {\n  closest,\n  WinEvent\n}\n","import { WinEvent, closest } from './polyfill'\r\n\r\nconst MILLISECONDS_MULTIPLIER = 1000\r\nconst Selectors = {\r\n  STEPS: '.step',\r\n  TRIGGER: '.step-trigger, a',\r\n  STEPPER: '.bs-stepper'\r\n}\r\n\r\nconst ClassName = {\r\n  ACTIVE: 'active',\r\n  LINEAR: 'linear',\r\n  BLOCK: 'dstepper-block',\r\n  NONE: 'dstepper-none',\r\n  FADE: 'fade'\r\n}\r\n\r\nconst transitionEndEvent = 'transitionend'\r\nconst customProperty = 'bsStepper'\r\n\r\nconst showStep = (step, stepList) => {\r\n  if (step.classList.contains(ClassName.ACTIVE)) {\r\n    return\r\n  }\r\n\r\n  const stepperNode = closest(step, Selectors.STEPPER)\r\n  const activeStep = stepList.filter(step => step.classList.contains(ClassName.ACTIVE))\r\n  if (activeStep.length) {\r\n    activeStep[0].classList.remove(ClassName.ACTIVE)\r\n  }\r\n  stepList.forEach(step => {\r\n    const trigger = step.querySelector(Selectors.TRIGGER)\r\n    trigger.setAttribute('aria-selected', 'false')\r\n    // if stepper is in linear mode, set disabled attribute on the trigger\r\n    if (stepperNode.classList.contains(ClassName.LINEAR)) {\r\n      trigger.setAttribute('disabled', 'disabled')\r\n    }\r\n  })\r\n\r\n  step.classList.add(ClassName.ACTIVE)\r\n  const currentTrigger = step.querySelector(Selectors.TRIGGER)\r\n  currentTrigger.setAttribute('aria-selected', 'true')\r\n  // if stepper is in linear mode, remove disabled attribute on current\r\n  if (stepperNode.classList.contains(ClassName.LINEAR)) {\r\n    currentTrigger.removeAttribute('disabled')\r\n  }\r\n}\r\n\r\nconst showContent = (content, contentList) => {\r\n  if (content.classList.contains(ClassName.ACTIVE)) {\r\n    return\r\n  }\r\n\r\n  function complete () {\r\n    content.classList.add(ClassName.BLOCK)\r\n    content.removeEventListener(transitionEndEvent, complete)\r\n  }\r\n\r\n  const activeContent = contentList.filter(content => content.classList.contains(ClassName.ACTIVE))\r\n  if (activeContent.length) {\r\n    activeContent[0].classList.remove(ClassName.ACTIVE)\r\n    activeContent[0].classList.remove(ClassName.BLOCK)\r\n  }\r\n\r\n  if (content.classList.contains(ClassName.FADE)) {\r\n    content.classList.remove(ClassName.NONE)\r\n    const duration = getTransitionDurationFromElement(content)\r\n    content.addEventListener(transitionEndEvent, complete)\r\n    if (activeContent.length) {\r\n      activeContent[0].classList.add(ClassName.NONE)\r\n    }\r\n\r\n    content.classList.add(ClassName.ACTIVE)\r\n    emulateTransitionEnd(content, duration)\r\n  } else {\r\n    content.classList.add(ClassName.ACTIVE)\r\n  }\r\n}\r\n\r\nconst getTransitionDurationFromElement = element => {\r\n  if (!element) {\r\n    return 0\r\n  }\r\n\r\n  // Get transition-duration of the element\r\n  let transitionDuration = window.getComputedStyle(element).transitionDuration\r\n  const floatTransitionDuration = parseFloat(transitionDuration)\r\n\r\n  // Return 0 if element or transition duration is not found\r\n  if (!floatTransitionDuration) {\r\n    return 0\r\n  }\r\n\r\n  // If multiple durations are defined, take the first\r\n  transitionDuration = transitionDuration.split(',')[0]\r\n\r\n  return parseFloat(transitionDuration) * MILLISECONDS_MULTIPLIER\r\n}\r\n\r\nconst emulateTransitionEnd = (element, duration) => {\r\n  let called = false\r\n  const durationPadding = 5\r\n  const emulatedDuration = duration + durationPadding\r\n  function listener () {\r\n    called = true\r\n    element.removeEventListener(transitionEndEvent, listener)\r\n  }\r\n\r\n  element.addEventListener(transitionEndEvent, listener)\r\n  window.setTimeout(() => {\r\n    if (!called) {\r\n      element.dispatchEvent(WinEvent(transitionEndEvent))\r\n    }\r\n\r\n    element.removeEventListener(transitionEndEvent, listener)\r\n  }, emulatedDuration)\r\n}\r\n\r\nconst detectAnimation = (contentList, animation) => {\r\n  if (animation) {\r\n    contentList.forEach(content => {\r\n      content.classList.add(ClassName.FADE)\r\n      content.classList.add(ClassName.NONE)\r\n    })\r\n  }\r\n}\r\n\r\nexport {\r\n  showContent,\r\n  showStep,\r\n  Selectors,\r\n  ClassName,\r\n  customProperty,\r\n  detectAnimation\r\n}\r\n","import { closest } from './polyfill'\nimport { Selectors, customProperty, showStep, showContent } from './util'\n\nfunction clickStepLinearListener (event) {\n  event.preventDefault()\n}\n\nfunction clickStepNonLinearListener (event) {\n  event.preventDefault()\n\n  const step = closest(event.target, Selectors.STEPS)\n  const stepperNode = closest(step, Selectors.STEPPER)\n  const stepper = stepperNode[customProperty]\n\n  const stepIndex = stepper._steps.indexOf(step)\n  stepper._currentIndex = stepIndex\n  showStep(step, stepper._steps)\n  showContent(stepper._stepsContents[stepIndex], stepper._stepsContents)\n}\n\nexport {\n  clickStepLinearListener,\n  clickStepNonLinearListener\n}\n","import { showContent, showStep, Selectors, ClassName, customProperty, detectAnimation } from './util'\r\nimport { clickStepLinearListener, clickStepNonLinearListener } from './listeners'\r\n\r\nconst DEFAULT_OPTIONS = {\r\n  linear: true,\r\n  animation: false\r\n}\r\n\r\nclass Stepper {\r\n  constructor (element, _options = {}) {\r\n    this._element = element\r\n    this._currentIndex = 0\r\n    this._stepsContents = []\r\n    this._steps = [].slice.call(this._element.querySelectorAll(Selectors.STEPS))\r\n      .filter(step => step.hasAttribute('data-target'))\r\n\r\n    this._steps.forEach(step => {\r\n      this._stepsContents.push(\r\n        this._element.querySelector(step.getAttribute('data-target'))\r\n      )\r\n    })\r\n\r\n    this.options = {\r\n      ...DEFAULT_OPTIONS,\r\n      ..._options\r\n    }\r\n\r\n    if (this.options.linear) {\r\n      this._element.classList.add(ClassName.LINEAR)\r\n    }\r\n\r\n    detectAnimation(this._stepsContents, this.options.animation)\r\n    if (this._steps.length) {\r\n      showStep(this._steps[this._currentIndex], this._steps)\r\n      showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n    }\r\n\r\n    this._setLinkListeners()\r\n    Object.defineProperty(this._element, customProperty, {\r\n      value: this,\r\n      writable: true\r\n    })\r\n  }\r\n\r\n  // Private\r\n\r\n  _setLinkListeners () {\r\n    this._steps.forEach(step => {\r\n      const trigger = step.querySelector(Selectors.TRIGGER)\r\n      if (this.options.linear) {\r\n        trigger.addEventListener('click', clickStepLinearListener)\r\n      } else {\r\n        trigger.addEventListener('click', clickStepNonLinearListener)\r\n      }\r\n    })\r\n  }\r\n\r\n  // Public\r\n\r\n  next () {\r\n    this._currentIndex = (this._currentIndex + 1) <= this._steps.length - 1 ? this._currentIndex + 1 : (this._steps.length - 1)\r\n\r\n    showStep(this._steps[this._currentIndex], this._steps)\r\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n  }\r\n\r\n  previous () {\r\n    this._currentIndex = (this._currentIndex - 1) >= 0 ? this._currentIndex - 1 : 0\r\n\r\n    showStep(this._steps[this._currentIndex], this._steps)\r\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n  }\r\n\r\n  to (stepNumber) {\r\n    const tempIndex = stepNumber - 1\r\n    this._currentIndex = tempIndex >= 0 && tempIndex < this._steps.length\r\n      ? tempIndex\r\n      : 0\r\n\r\n    showStep(this._steps[this._currentIndex], this._steps)\r\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n  }\r\n\r\n  reset () {\r\n    this._currentIndex = 0\r\n    showStep(this._steps[this._currentIndex], this._steps)\r\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n  }\r\n\r\n  destroy () {\r\n    this._steps.forEach(step => {\r\n      const trigger = step.querySelector(Selectors.TRIGGER)\r\n      if (this.options.linear) {\r\n        trigger.removeEventListener('click', clickStepLinearListener)\r\n      } else {\r\n        trigger.removeEventListener('click', clickStepNonLinearListener)\r\n      }\r\n    })\r\n\r\n    this._element[customProperty] = undefined\r\n    this._element = undefined\r\n    this._currentIndex = undefined\r\n    this._steps = undefined\r\n    this._stepsContents = undefined\r\n  }\r\n}\r\n\r\nexport default Stepper\r\n"],"names":["matches","window","Element","prototype","closest","element","selector","WinEvent","inType","params","Event","polyfill","msMatchesSelector","webkitMatchesSelector","document","documentElement","contains","call","parentElement","parentNode","nodeType","e","createEvent","initEvent","Boolean","bubbles","cancelable","MILLISECONDS_MULTIPLIER","Selectors","STEPS","TRIGGER","STEPPER","ClassName","ACTIVE","LINEAR","BLOCK","NONE","FADE","transitionEndEvent","customProperty","showStep","step","stepList","classList","stepperNode","activeStep","filter","length","remove","forEach","trigger","querySelector","setAttribute","add","currentTrigger","removeAttribute","showContent","content","contentList","complete","removeEventListener","activeContent","duration","getTransitionDurationFromElement","addEventListener","emulateTransitionEnd","transitionDuration","getComputedStyle","floatTransitionDuration","parseFloat","split","called","durationPadding","emulatedDuration","listener","setTimeout","dispatchEvent","detectAnimation","animation","clickStepLinearListener","event","preventDefault","clickStepNonLinearListener","target","stepper","stepIndex","_steps","indexOf","_currentIndex","_stepsContents","DEFAULT_OPTIONS","linear","Stepper","_options","_element","slice","querySelectorAll","hasAttribute","push","getAttribute","options","_setLinkListeners","Object","defineProperty","value","writable","next","previous","to","stepNumber","tempIndex","reset","destroy","undefined"],"mappings":"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"}